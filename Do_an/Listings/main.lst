A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\main.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE main.a51 NOMOD51 SET(SMALL) DEBUG PRINT(.\Listings\main.lst) OBJECT(.\O
                      bjects\main.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;#include <REGX52.H>
                +1     2     
                +1     3     
                +1     4     
                +1     5     
                +1     6     
                +1     7     
                +1     8     
                +1     9     
                +1    10     
                +1    11     
                +1    12     
                +1    13     
                +1    14     
                +1    15     
  0080          +1    16     sfr P0      = 0x80;
  0081          +1    17     sfr SP      = 0x81;
  0082          +1    18     sfr DPL     = 0x82;
  0083          +1    19     sfr DPH     = 0x83;
  0087          +1    20     sfr PCON    = 0x87;
  0088          +1    21     sfr TCON    = 0x88;
  0089          +1    22     sfr TMOD    = 0x89;
  008A          +1    23     sfr TL0     = 0x8A;
  008B          +1    24     sfr TL1     = 0x8B;
  008C          +1    25     sfr TH0     = 0x8C;
  008D          +1    26     sfr TH1     = 0x8D;
  0090          +1    27     sfr P1      = 0x90;
  0098          +1    28     sfr SCON    = 0x98;
  0099          +1    29     sfr SBUF    = 0x99;
  00A0          +1    30     sfr P2      = 0xA0;
  00A8          +1    31     sfr IE      = 0xA8;
  00B0          +1    32     sfr P3      = 0xB0;
  00B8          +1    33     sfr IP      = 0xB8;
  00C8          +1    34     sfr T2CON   = 0xC8;
  00C9          +1    35     sfr T2MOD   = 0xC9;
  00CA          +1    36     sfr RCAP2L  = 0xCA;
  00CB          +1    37     sfr RCAP2H  = 0xCB;
  00CC          +1    38     sfr TL2     = 0xCC;
  00CD          +1    39     sfr TH2     = 0xCD;
  00D0          +1    40     sfr PSW     = 0xD0;
  00E0          +1    41     sfr ACC     = 0xE0;
  00F0          +1    42     sfr B       = 0xF0;
                +1    43     
                +1    44     
                +1    45     
                +1    46     
  0080          +1    47     sbit P0_0 = 0x80;
  0081          +1    48     sbit P0_1 = 0x81;
  0082          +1    49     sbit P0_2 = 0x82;
  0083          +1    50     sbit P0_3 = 0x83;
  0084          +1    51     sbit P0_4 = 0x84;
  0085          +1    52     sbit P0_5 = 0x85;
  0086          +1    53     sbit P0_6 = 0x86;
  0087          +1    54     sbit P0_7 = 0x87;
                +1    55     
                +1    56     
                +1    57     
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     2

                +1    58     
                +1    59     
                +1    60     
                +1    61     
                +1    62     
                +1    63     
                +1    64     
                +1    65     
                +1    66     
                +1    67     
                +1    68     
                +1    69     
                +1    70     
  0088          +1    71     sbit IT0  = 0x88;
  0089          +1    72     sbit IE0  = 0x89;
  008A          +1    73     sbit IT1  = 0x8A;
  008B          +1    74     sbit IE1  = 0x8B;
  008C          +1    75     sbit TR0  = 0x8C;
  008D          +1    76     sbit TF0  = 0x8D;
  008E          +1    77     sbit TR1  = 0x8E;
  008F          +1    78     sbit TF1  = 0x8F;
                +1    79     
                +1    80     
                +1    81     
                +1    82     
                +1    83     
                +1    84     
                +1    85     
                +1    86     
                +1    87     
                +1    88     
                +1    89     
                +1    90     
                +1    91     
                +1    92     
                +1    93     
                +1    94     
                +1    95     
                +1    96     
                +1    97     
  0090          +1    98     sbit P1_0 = 0x90;
  0091          +1    99     sbit P1_1 = 0x91;
  0092          +1   100     sbit P1_2 = 0x92;
  0093          +1   101     sbit P1_3 = 0x93;
  0094          +1   102     sbit P1_4 = 0x94;
  0095          +1   103     sbit P1_5 = 0x95;
  0096          +1   104     sbit P1_6 = 0x96;
  0097          +1   105     sbit P1_7 = 0x97;
                +1   106     
  0090          +1   107     sbit T2   = 0x90;       /* External input to Timer/Counter 2, clock out */
  0091          +1   108     sbit T2EX = 0x91;       /* Timer/Counter 2 capture/reload trigger & dir ctl */
                +1   109     
                +1   110     
                +1   111     
                +1   112     
  0098          +1   113     sbit RI   = 0x98;
  0099          +1   114     sbit TI   = 0x99;
  009A          +1   115     sbit RB8  = 0x9A;
  009B          +1   116     sbit TB8  = 0x9B;
  009C          +1   117     sbit REN  = 0x9C;
  009D          +1   118     sbit SM2  = 0x9D;
  009E          +1   119     sbit SM1  = 0x9E;
  009F          +1   120     sbit SM0  = 0x9F;
                +1   121     
                +1   122     
                +1   123     
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     3

                +1   124     
  00A0          +1   125     sbit P2_0 = 0xA0;
  00A1          +1   126     sbit P2_1 = 0xA1;
  00A2          +1   127     sbit P2_2 = 0xA2;
  00A3          +1   128     sbit P2_3 = 0xA3;
  00A4          +1   129     sbit P2_4 = 0xA4;
  00A5          +1   130     sbit P2_5 = 0xA5;
  00A6          +1   131     sbit P2_6 = 0xA6;
  00A7          +1   132     sbit P2_7 = 0xA7;
                +1   133     
                +1   134     
                +1   135     
                +1   136     
  00A8          +1   137     sbit EX0  = 0xA8;       /* 1=Enable External interrupt 0 */
  00A9          +1   138     sbit ET0  = 0xA9;       /* 1=Enable Timer 0 interrupt */
  00AA          +1   139     sbit EX1  = 0xAA;       /* 1=Enable External interrupt 1 */
  00AB          +1   140     sbit ET1  = 0xAB;       /* 1=Enable Timer 1 interrupt */
  00AC          +1   141     sbit ES   = 0xAC;       /* 1=Enable Serial port interrupt */
  00AD          +1   142     sbit ET2  = 0xAD;       /* 1=Enable Timer 2 interrupt */
                +1   143     
  00AF          +1   144     sbit EA   = 0xAF;       /* 0=Disable all interrupts */
                +1   145     
                +1   146     
                +1   147     
                +1   148     
  00B0          +1   149     sbit P3_0 = 0xB0;
  00B1          +1   150     sbit P3_1 = 0xB1;
  00B2          +1   151     sbit P3_2 = 0xB2;
  00B3          +1   152     sbit P3_3 = 0xB3;
  00B4          +1   153     sbit P3_4 = 0xB4;
  00B5          +1   154     sbit P3_5 = 0xB5;
  00B6          +1   155     sbit P3_6 = 0xB6;
  00B7          +1   156     sbit P3_7 = 0xB7;
                +1   157     
  00B0          +1   158     sbit RXD  = 0xB0;       /* Serial data input */
  00B1          +1   159     sbit TXD  = 0xB1;       /* Serial data output */
  00B2          +1   160     sbit INT0 = 0xB2;       /* External interrupt 0 */
  00B3          +1   161     sbit INT1 = 0xB3;       /* External interrupt 1 */
  00B4          +1   162     sbit T0   = 0xB4;       /* Timer 0 external input */
  00B5          +1   163     sbit T1   = 0xB5;       /* Timer 1 external input */
  00B6          +1   164     sbit WR   = 0xB6;       /* External data memory write strobe */
  00B7          +1   165     sbit RD   = 0xB7;       /* External data memory read strobe */
                +1   166     
                +1   167     
                +1   168     
                +1   169     
  00B8          +1   170     sbit PX0  = 0xB8;
  00B9          +1   171     sbit PT0  = 0xB9;
  00BA          +1   172     sbit PX1  = 0xBA;
  00BB          +1   173     sbit PT1  = 0xBB;
  00BC          +1   174     sbit PS   = 0xBC;
  00BD          +1   175     sbit PT2  = 0xBD;
                +1   176     
                +1   177     
                +1   178     
                +1   179     
  00C8          +1   180     sbit CP_RL2= 0xC8;      /* 0=Reload, 1=Capture select */
  00C9          +1   181     sbit C_T2 = 0xC9;       /* 0=Timer, 1=Counter */
  00CA          +1   182     sbit TR2  = 0xCA;       /* 0=Stop timer, 1=Start timer */
  00CB          +1   183     sbit EXEN2= 0xCB;       /* Timer 2 external enable */
  00CC          +1   184     sbit TCLK = 0xCC;       /* 0=Serial clock uses Timer 1 overflow, 1=Timer 2 */
  00CD          +1   185     sbit RCLK = 0xCD;       /* 0=Serial clock uses Timer 1 overflow, 1=Timer 2 */
  00CE          +1   186     sbit EXF2 = 0xCE;       /* Timer 2 external flag */
  00CF          +1   187     sbit TF2  = 0xCF;       /* Timer 2 overflow flag */
                +1   188     
                +1   189     
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     4

                +1   190     
                +1   191     
                +1   192     
                +1   193     
                +1   194     
                +1   195     
                +1   196     
                +1   197     
  00D0          +1   198     sbit P    = 0xD0;
  00D1          +1   199     sbit F1   = 0xD1;
  00D2          +1   200     sbit OV   = 0xD2;
  00D3          +1   201     sbit RS0  = 0xD3;
  00D4          +1   202     sbit RS1  = 0xD4;
  00D5          +1   203     sbit F0   = 0xD5;
  00D6          +1   204     sbit AC   = 0xD6;
  00D7          +1   205     sbit CY   = 0xD7;
                +1   206     
                +1   207     
                +1   208     
                +1   209     
                +1   210     
                +1   211     
                +1   212     
                +1   213     
                +1   214     
                +1   215     
                +1   216     
                +1   217     
                +1   218     
                +1   219     
                +1   220     
                +1   221     
                +1   222     
                     223     
0000                 224     org 0h
0000 020030          225             ljmp init
001B                 226     org 1bh
001B 120224          227             lcall Clock
001E 32              228             reti
002B                 229     org 02bh
002B 120108          230             lcall Change_Effect
002E 32              231             reti
                     232             
0030                 233     org 30h
0030                 234             init:
0030 758911          235             mov TMOD, #00010001b
0033 75A8A8          236             mov IE, #10101000b
0036 758DFF          237             mov TH1, #0ffh
0039 758BFD          238             mov TL1, #0fdh
003C 75CD00          239             mov TH2, #0h
003F 75CC00          240             mov TL2, #0h
0042 7801            241             mov R0, #1d
0044 7A10            242             mov R2, #16d
0046 7F01            243             mov R7, #1d
0048 12012E          244             lcall Send_1
004B 120127          245             lcall Res_back
004E                 246             main:
004E 1170            247             acall Get_sample
0050 C28E            248             clr TR1
0052 D2CA            249             setb TR2
0054 C2CA            250             clr TR2
                     251             
0056 EF              252             mov A, R7
0057 9401            253             subb A, #1d
0059 6008            254             jz E_1
005B 9401            255             subb A, #1d
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     5

005D 6008            256             jz E_2
005F 9401            257             subb A, #1d
0061 6008            258             jz E_3
                     259             
0063                 260             E_1:
0063 1198            261             acall Effect_1
0065 8006            262             jmp exit_main
0067                 263             E_2:
0067 11B4            264             acall Effect_2
0069 8002            265             jmp exit_main
006B                 266             E_3:
006B 11D4            267             acall Effect_3
                     268             
006D                 269             exit_main:
006D 02004E          270             ljmp main
                     271             
                     272             
                     273             
0070                 274             Get_sample:
0070 D28E            275             setb TR1
0072 D2A1            276             setb P2.1
0074 3117            277             acall Delay
0076 8590F0          278             mov B, P1    ;doc adc
                     279             
0079 74FF            280             mov A, #0ffh ;tinh khoang cach
007B 95F0            281             subb A, B
                     282             
007D B8010A          283             cjne R0, #1d, not_first_time
0080 7800            284             mov R0, #0d
0082 FD              285             mov R5, A   ;luu khoang cach
0083 75F010          286             mov B, #16d
0086 84              287             div AB
0087 FB              288             mov R3, A ;chia khoang cach thanh 16 doan aka 16 led
0088 800D            289             jmp exit_Get_sample
008A                 290             not_first_time:
008A FE              291             mov R6, A  ;luu khoang cach vao bo nho tam
008B 9D              292             subb A, R5 ;so sanh khoang cach giua mau dau va mau moi
008C 4004            293             jc valid ;nhay neu A < R5
008E 7C10            294             mov R4, #16d
0090 8005            295             jmp exit_Get_sample 
                     296             
0092                 297             valid:
0092 EE              298             mov A, R6
0093 8BF0            299             mov B, R3
0095 84              300             div AB
0096 FC              301             mov R4, A ;tinh so led tat
                     302             
0097                 303             exit_Get_sample:
0097 22              304             ret
                     305             
0098                 306             Effect_1:
0098 EC              307             mov A, R4
0099 9410            308             subb A, #16d
009B 5010            309             jnc Turn_Off_Effect_1 ; kiem tra R4 >= 16 khong
009D BC0006          310             cjne R4, #0d, Calc_Effect_1
00A0 7A10            311             mov R2, #16d
00A2 7C01            312             mov R4, #1d
00A4 8004            313             jmp Turn_On_Effect_1
                     314             
00A6                 315             Calc_Effect_1:
00A6 7410            316             mov A, #16d
00A8 9C              317             subb A, R4 ;tinh so led bat
00A9 FA              318             mov R2, A
                     319             
00AA                 320             Turn_On_Effect_1:
00AA 12012E          321             lcall Send_1
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     6

00AD                 322             Turn_Off_Effect_1:
00AD 1201A9          323             lcall Send_0
00B0 120127          324             lcall Res_back
00B3 22              325             ret
                     326             
00B4                 327             Effect_2:
00B4 EC              328             mov A, R4
00B5 9410            329             subb A, #16d
00B7 4006            330             jc All_led_on ; kiem tra R4 < 16 khong
00B9 7A01            331             mov R2, #1d
00BB 7C10            332             mov R4, #16d
00BD 800B            333             jmp Turn_Off_Effect_2
                     334             
00BF                 335             All_led_on:
00BF BC0004          336             cjne R4, #0d, Calc_Effect_2
00C2 7A10            337             mov R2, #16d
00C4 8007            338             jmp Turn_On_Effect_2
                     339             
00C6                 340             Calc_Effect_2:
00C6 7410            341             mov A, #16d
00C8 9C              342             subb A, R4 ;tinh so led bat
00C9 FA              343             mov R2, A
                     344             
00CA                 345             Turn_Off_Effect_2:
00CA 1201A9          346             lcall Send_0
00CD                 347             Turn_On_Effect_2:
00CD 12012E          348             lcall Send_1
00D0 120127          349             lcall Res_back
00D3 22              350             ret
                     351             
00D4                 352             Effect_3:
00D4 EC              353             mov A, R4
00D5 9410            354             subb A, #16d
00D7 7A00            355             mov R2, #0d  ;neu dieu kien duoi dung thi khong bat led
00D9 501E            356             jnc Turn_Off_Effect_3 ; kiem tra R4 >= 16 khong
00DB BC0006          357             cjne R4, #0d, Calc_Effect_3
00DE 7A08            358             mov R2, #8d ;nua thanh led dau
00E0 7408            359             mov A, #8d  ; nua thanh led sau
00E2 800D            360             jmp Turn_Half_First_On_Effect_3
                     361             
00E4                 362             Calc_Effect_3:
00E4 7410            363             mov A, #16d
00E6 9C              364             subb A, R4 ;tinh so led bat
00E7 75F002          365             mov B, #2d
00EA 84              366             div AB
00EB FA              367             mov R2, A
00EC E5F0            368             mov A, B
00EE 2C              369             add A, R4
00EF FC              370             mov R4, A    ;xu ly so led tat bi le bang cach cong so du sau phep chia
00F0 EA              371             mov A, R2
                     372             
00F1                 373             Turn_Half_First_On_Effect_3:
00F1 12012E          374             lcall Send_1
00F4 FA              375             mov R2, A
00F5 9408            376             subb A, #8d
00F7 5008            377             jnc Turn_Half_Second_On_Effect_3 ;kiem tra co phai bat full 2 thanh led
                     378             
00F9                 379             Turn_Off_Effect_3:
00F9 1201A9          380             lcall Send_0
00FC EA              381             mov A, R2
00FD 9401            382             subb A, #1d
00FF 4003            383             jc exit_effect_3
                     384             
0101                 385             Turn_Half_Second_On_Effect_3:
0101 12012E          386             lcall Send_1
                     387             
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     7

0104                 388             exit_effect_3:
0104 120127          389             lcall Res_back
0107 22              390             ret
                     391     
0108                 392             Change_Effect:
0108 0F              393             inc R7
0109 BF0402          394             cjne R7, #4d, exit_change
010C 7F01            395             mov R7, #1d
010E                 396             exit_change:
010E 75CD00          397             mov TH2, #0h
0111 75CC00          398             mov TL2, #0h
0114 C2CF            399             clr TF2
0116 32              400             reti
                     401             
0117                 402             Delay:
0117 758CFE          403             mov TH0, #0feh
011A 758AF9          404             mov TL0, #0f9h
011D D28C            405             setb TR0
011F 308DFD          406             loop: jnb TF0, loop
0122 C28D            407             clr TF0
0124 C28C            408             clr TR0
0126 22              409             ret
                     410             
0127                 411             Res_back:
0127 7971            412             mov R1, #113d
0129 C2A2            413             clr P2.2
012B                 414             wait:
012B D9FE            415             djnz R1, wait
012D 22              416             ret
                     417             
012E                 418             Send_1:
012E D2A2            419             setb P2.2
0130 C2A2            420             clr P2.2
0132 00              421             nop
0133 D2A2            422             setb P2.2
0135 C2A2            423             clr P2.2
0137 00              424             nop
0138 D2A2            425             setb P2.2
013A C2A2            426             clr P2.2
013C 00              427             nop
013D D2A2            428             setb P2.2
013F C2A2            429             clr P2.2
0141 00              430             nop
0142 D2A2            431             setb P2.2
0144 C2A2            432             clr P2.2
0146 00              433             nop
0147 D2A2            434             setb P2.2
0149 C2A2            435             clr P2.2
014B 00              436             nop
014C D2A2            437             setb P2.2
014E C2A2            438             clr P2.2
0150 00              439             nop
0151 D2A2            440             setb P2.2
0153 C2A2            441             clr P2.2
0155 00              442             nop
0156 D2A2            443             setb P2.2
0158 C2A2            444             clr P2.2
015A 00              445             nop
015B D2A2            446             setb P2.2
015D C2A2            447             clr P2.2
015F 00              448             nop
0160 D2A2            449             setb P2.2
0162 00              450             nop
0163 C2A2            451             clr P2.2
0165 D2A2            452             setb P2.2
0167 C2A2            453             clr P2.2
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     8

0169 00              454             nop
016A D2A2            455             setb P2.2
016C C2A2            456             clr P2.2
016E 00              457             nop
016F D2A2            458             setb P2.2
0171 00              459             nop
0172 C2A2            460             clr P2.2
0174 D2A2            461             setb P2.2
0176 00              462             nop
0177 C2A2            463             clr P2.2
0179 D2A2            464             setb P2.2
017B C2A2            465             clr P2.2
017D 00              466             nop
017E D2A2            467             setb P2.2
0180 C2A2            468             clr P2.2
0182 00              469             nop
0183 D2A2            470             setb P2.2
0185 C2A2            471             clr P2.2
0187 00              472             nop
0188 D2A2            473             setb P2.2
018A 00              474             nop
018B C2A2            475             clr P2.2
018D D2A2            476             setb P2.2
018F C2A2            477             clr P2.2
0191 00              478             nop
0192 D2A2            479             setb P2.2
0194 C2A2            480             clr P2.2
0196 00              481             nop
0197 D2A2            482             setb P2.2
0199 00              483             nop
019A C2A2            484             clr P2.2
019C D2A2            485             setb P2.2
019E C2A2            486             clr P2.2
01A0 00              487             nop
01A1 D2A2            488             setb P2.2
01A3 C2A2            489             clr P2.2
01A5 00              490             nop
                     491     
                     492     
                     493     
                     494     
01A6 DA86            495             djnz R2, Send_1
01A8 22              496             ret
                     497             
01A9                 498             Send_0:
01A9 D2A2            499             setb P2.2
01AB C2A2            500             clr P2.2
01AD 00              501             nop
                     502             
01AE D2A2            503             setb P2.2
01B0 C2A2            504             clr P2.2
01B2 00              505             nop
                     506             
01B3 D2A2            507             setb P2.2
01B5 C2A2            508             clr P2.2
01B7 00              509             nop
                     510             
01B8 D2A2            511             setb P2.2
01BA C2A2            512             clr P2.2
01BC 00              513             nop
                     514             
01BD D2A2            515             setb P2.2
01BF C2A2            516             clr P2.2
01C1 00              517             nop
                     518             
01C2 D2A2            519             setb P2.2
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE     9

01C4 C2A2            520             clr P2.2
01C6 00              521             nop
                     522             
01C7 D2A2            523             setb P2.2
01C9 C2A2            524             clr P2.2
01CB 00              525             nop
                     526             
01CC D2A2            527             setb P2.2
01CE C2A2            528             clr P2.2
01D0 00              529             nop
                     530             
01D1 D2A2            531             setb P2.2
01D3 C2A2            532             clr P2.2
01D5 00              533             nop
                     534             
01D6 D2A2            535             setb P2.2
01D8 C2A2            536             clr P2.2
01DA 00              537             nop
                     538             
01DB D2A2            539             setb P2.2
01DD C2A2            540             clr P2.2
01DF 00              541             nop
                     542             
01E0 D2A2            543             setb P2.2
01E2 C2A2            544             clr P2.2
01E4 00              545             nop
                     546             
01E5 D2A2            547             setb P2.2
01E7 C2A2            548             clr P2.2
01E9 00              549             nop
                     550             
01EA D2A2            551             setb P2.2
01EC C2A2            552             clr P2.2
01EE 00              553             nop
                     554             
01EF D2A2            555             setb P2.2
01F1 C2A2            556             clr P2.2
01F3 00              557             nop
                     558             
01F4 D2A2            559             setb P2.2
01F6 C2A2            560             clr P2.2
01F8 00              561             nop
                     562             
01F9 D2A2            563             setb P2.2
01FB C2A2            564             clr P2.2
01FD 00              565             nop
                     566             
01FE D2A2            567             setb P2.2
0200 C2A2            568             clr P2.2
0202 00              569             nop
                     570             
0203 D2A2            571             setb P2.2
0205 C2A2            572             clr P2.2
0207 00              573             nop
                     574             
0208 D2A2            575             setb P2.2
020A C2A2            576             clr P2.2
020C 00              577             nop
                     578             
020D D2A2            579             setb P2.2
020F C2A2            580             clr P2.2
0211 00              581             nop
                     582             
0212 D2A2            583             setb P2.2
0214 C2A2            584             clr P2.2
0216 00              585             nop
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE    10

                     586             
0217 D2A2            587             setb P2.2
0219 C2A2            588             clr P2.2
021B 00              589             nop
                     590             
021C D2A2            591             setb P2.2
021E C2A2            592             clr P2.2
0220 00              593             nop
0221 DC86            594             djnz R4, Send_0
0223 22              595             ret
                     596             
0224                 597             Clock:
0224 20A304          598             jb P2.3, zero
0227 D2A3            599             setb P2.3
0229 8002            600             jmp exit_clock
022B                 601             zero:
022B C2A3            602             clr P2.3
022D                 603             exit_clock:
022D 758DFF          604             mov TH1, #0ffh
0230 758BFD          605             mov TL1, #0fdh
0233 22              606             ret
                     607     END
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE    11

SYMBOL TABLE LISTING
------ ----- -------


N A M E                       T Y P E  V A L U E   ATTRIBUTES

AC . . . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . . . . . . .  D ADDR   00E0H   A   
ALL_LED_ON . . . . . . . . .  C ADDR   00BFH   A   
B. . . . . . . . . . . . . .  D ADDR   00F0H   A   
CALC_EFFECT_1. . . . . . . .  C ADDR   00A6H   A   
CALC_EFFECT_2. . . . . . . .  C ADDR   00C6H   A   
CALC_EFFECT_3. . . . . . . .  C ADDR   00E4H   A   
CHANGE_EFFECT. . . . . . . .  C ADDR   0108H   A   
CLOCK. . . . . . . . . . . .  C ADDR   0224H   A   
CP_RL2 . . . . . . . . . . .  B ADDR   00C8H.0 A   
CY . . . . . . . . . . . . .  B ADDR   00D0H.7 A   
C_T2 . . . . . . . . . . . .  B ADDR   00C8H.1 A   
DELAY. . . . . . . . . . . .  C ADDR   0117H   A   
DPH. . . . . . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EFFECT_1 . . . . . . . . . .  C ADDR   0098H   A   
EFFECT_2 . . . . . . . . . .  C ADDR   00B4H   A   
EFFECT_3 . . . . . . . . . .  C ADDR   00D4H   A   
ES . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0. . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . . . . . . .  B ADDR   00A8H.3 A   
ET2. . . . . . . . . . . . .  B ADDR   00A8H.5 A   
EX0. . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . . . . . . .  B ADDR   00A8H.2 A   
EXEN2. . . . . . . . . . . .  B ADDR   00C8H.3 A   
EXF2 . . . . . . . . . . . .  B ADDR   00C8H.6 A   
EXIT_CHANGE. . . . . . . . .  C ADDR   010EH   A   
EXIT_CLOCK . . . . . . . . .  C ADDR   022DH   A   
EXIT_EFFECT_3. . . . . . . .  C ADDR   0104H   A   
EXIT_GET_SAMPLE. . . . . . .  C ADDR   0097H   A   
EXIT_MAIN. . . . . . . . . .  C ADDR   006DH   A   
E_1. . . . . . . . . . . . .  C ADDR   0063H   A   
E_2. . . . . . . . . . . . .  C ADDR   0067H   A   
E_3. . . . . . . . . . . . .  C ADDR   006BH   A   
F0 . . . . . . . . . . . . .  B ADDR   00D0H.5 A   
F1 . . . . . . . . . . . . .  B ADDR   00D0H.1 A   
GET_SAMPLE . . . . . . . . .  C ADDR   0070H   A   
IE . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0. . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . . . . . . .  B ADDR   0088H.3 A   
INIT . . . . . . . . . . . .  C ADDR   0030H   A   
INT0 . . . . . . . . . . . .  B ADDR   00B0H.2 A   
INT1 . . . . . . . . . . . .  B ADDR   00B0H.3 A   
IP . . . . . . . . . . . . .  D ADDR   00B8H   A   
IT0. . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . . . . . . .  B ADDR   0088H.2 A   
LOOP . . . . . . . . . . . .  C ADDR   011FH   A   
MAIN . . . . . . . . . . . .  C ADDR   004EH   A   
NOT_FIRST_TIME . . . . . . .  C ADDR   008AH   A   
OV . . . . . . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . . . . . . .  D ADDR   0080H   A   
P0_0 . . . . . . . . . . . .  B ADDR   0080H.0 A   
P0_1 . . . . . . . . . . . .  B ADDR   0080H.1 A   
P0_2 . . . . . . . . . . . .  B ADDR   0080H.2 A   
P0_3 . . . . . . . . . . . .  B ADDR   0080H.3 A   
P0_4 . . . . . . . . . . . .  B ADDR   0080H.4 A   
P0_5 . . . . . . . . . . . .  B ADDR   0080H.5 A   
P0_6 . . . . . . . . . . . .  B ADDR   0080H.6 A   
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE    12

P0_7 . . . . . . . . . . . .  B ADDR   0080H.7 A   
P1 . . . . . . . . . . . . .  D ADDR   0090H   A   
P1_0 . . . . . . . . . . . .  B ADDR   0090H.0 A   
P1_1 . . . . . . . . . . . .  B ADDR   0090H.1 A   
P1_2 . . . . . . . . . . . .  B ADDR   0090H.2 A   
P1_3 . . . . . . . . . . . .  B ADDR   0090H.3 A   
P1_4 . . . . . . . . . . . .  B ADDR   0090H.4 A   
P1_5 . . . . . . . . . . . .  B ADDR   0090H.5 A   
P1_6 . . . . . . . . . . . .  B ADDR   0090H.6 A   
P1_7 . . . . . . . . . . . .  B ADDR   0090H.7 A   
P2 . . . . . . . . . . . . .  D ADDR   00A0H   A   
P2_0 . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P2_1 . . . . . . . . . . . .  B ADDR   00A0H.1 A   
P2_2 . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P2_3 . . . . . . . . . . . .  B ADDR   00A0H.3 A   
P2_4 . . . . . . . . . . . .  B ADDR   00A0H.4 A   
P2_5 . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P2_6 . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P2_7 . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P3 . . . . . . . . . . . . .  D ADDR   00B0H   A   
P3_0 . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P3_1 . . . . . . . . . . . .  B ADDR   00B0H.1 A   
P3_2 . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P3_3 . . . . . . . . . . . .  B ADDR   00B0H.3 A   
P3_4 . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P3_5 . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P3_6 . . . . . . . . . . . .  B ADDR   00B0H.6 A   
P3_7 . . . . . . . . . . . .  B ADDR   00B0H.7 A   
PCON . . . . . . . . . . . .  D ADDR   0087H   A   
PS . . . . . . . . . . . . .  B ADDR   00B8H.4 A   
PSW. . . . . . . . . . . . .  D ADDR   00D0H   A   
PT0. . . . . . . . . . . . .  B ADDR   00B8H.1 A   
PT1. . . . . . . . . . . . .  B ADDR   00B8H.3 A   
PT2. . . . . . . . . . . . .  B ADDR   00B8H.5 A   
PX0. . . . . . . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . . . . . . .  B ADDR   00B8H.2 A   
RB8. . . . . . . . . . . . .  B ADDR   0098H.2 A   
RCAP2H . . . . . . . . . . .  D ADDR   00CBH   A   
RCAP2L . . . . . . . . . . .  D ADDR   00CAH   A   
RCLK . . . . . . . . . . . .  B ADDR   00C8H.5 A   
RD . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
REN. . . . . . . . . . . . .  B ADDR   0098H.4 A   
RES_BACK . . . . . . . . . .  C ADDR   0127H   A   
RI . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RS0. . . . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . . . . . . .  B ADDR   00D0H.4 A   
RXD. . . . . . . . . . . . .  B ADDR   00B0H.0 A   
SBUF . . . . . . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . . . . . . .  D ADDR   0098H   A   
SEND_0 . . . . . . . . . . .  C ADDR   01A9H   A   
SEND_1 . . . . . . . . . . .  C ADDR   012EH   A   
SM0. . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . . . . . . .  D ADDR   0081H   A   
T0 . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
T1 . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
T2 . . . . . . . . . . . . .  B ADDR   0090H.0 A   
T2CON. . . . . . . . . . . .  D ADDR   00C8H   A   
T2EX . . . . . . . . . . . .  B ADDR   0090H.1 A   
T2MOD. . . . . . . . . . . .  D ADDR   00C9H   A   
TB8. . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCLK . . . . . . . . . . . .  B ADDR   00C8H.4 A   
TCON . . . . . . . . . . . .  D ADDR   0088H   A   
TF0. . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . . . . . . .  B ADDR   0088H.7 A   
A51 MACRO ASSEMBLER  MAIN                                                                 07/11/2024 18:36:45 PAGE    13

TF2. . . . . . . . . . . . .  B ADDR   00C8H.7 A   
TH0. . . . . . . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . . . . . . .  D ADDR   00CDH   A   
TI . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TL0. . . . . . . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . . . . . . .  D ADDR   00CCH   A   
TMOD . . . . . . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . . . . . . .  B ADDR   0088H.6 A   
TR2. . . . . . . . . . . . .  B ADDR   00C8H.2 A   
TURN_HALF_FIRST_ON_EFFECT_3.  C ADDR   00F1H   A   
TURN_HALF_SECOND_ON_EFFECT_3  C ADDR   0101H   A   
TURN_OFF_EFFECT_1. . . . . .  C ADDR   00ADH   A   
TURN_OFF_EFFECT_2. . . . . .  C ADDR   00CAH   A   
TURN_OFF_EFFECT_3. . . . . .  C ADDR   00F9H   A   
TURN_ON_EFFECT_1 . . . . . .  C ADDR   00AAH   A   
TURN_ON_EFFECT_2 . . . . . .  C ADDR   00CDH   A   
TXD. . . . . . . . . . . . .  B ADDR   00B0H.1 A   
VALID. . . . . . . . . . . .  C ADDR   0092H   A   
WAIT . . . . . . . . . . . .  C ADDR   012BH   A   
WR . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
ZERO . . . . . . . . . . . .  C ADDR   022BH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
